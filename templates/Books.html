<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Directory</title>
  <link rel="stylesheet" href= "{{ url_for('static',filename='styles/styles.css') }}">
</head>

<body>
    <img src="{{ url_for('static',filename='images/logo.png')}}" class='logo'>
    <div class="nav-group">
        {% if current_user.role=="staff" %}
            <a href="{{url_for("home")}}"><button>Home</button></a>
            <a href="{{url_for("users")}}"><button>Users</button></a>
            <a href="{{url_for("staff")}}"><button>Staff</button></a>
            <a href="{{url_for("books")}}"><button>Books</button></a>
            <a href="{{url_for("checkout")}}"><button>Checkout</button></a>
            <a href="{{url_for("equipment")}}"><button>Equipment</button></a>
            <a href="{{url_for("reservation")}}"><button>Reservations</button>
            <a href="{{url_for("layout")}}"><button>Layout</button>
            <a href="{{url_for("fines")}}"><button>Fines</button></a>
            <a href="{{url_for("about")}}"><button>About</button></a>
            <a href="{{url_for("logout")}}"><button>Logout</button></a>
        {% endif %}
        {% if current_user.role=="user" %}
            <a href="{{url_for("home")}}"><button>Home</button></a>
            <a href="{{url_for("books")}}"><button>Books</button></a>
            <a href="{{url_for("checkout")}}"><button>Checkout</button></a>
            <a href="{{url_for("equipment")}}"><button>Equipment</button></a>
            <a href="{{url_for("reservation")}}"><button>Reservations</button>
            <a href="{{url_for("layout")}}"><button>Layout</button>
            <a href="{{url_for("about")}}"><button>About</button></a>
            <a href="{{url_for("logout")}}"><button>Logout</button></a>
        {% endif %}
    </div> 
    <div class="content">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Author</th>
                    <th>ISBN</th>
                    <th>Location</th>
                    <th>Status</th>
                    <th>Added</th>
                </tr>
            </thead>
            <tbody>
                <h1>
                {% if current_user.is_authenticated %}
                    Hi {{ current_user.name }}!
                {% endif %}
                </h1>

                {% if current_user.role == 'staff' %}
                <p><b>Instructions: </b>Click on a row on the table to select that item. When selected you can <b>EDIT</b> that selection. Click again on the selected item to deselect and <b>ADD</b> a new book.</p>
                <div id="add-form" class="staff-form">
                    <form name='add-book-form' method='post' action="{{ url_for("addbook")}}">
                        <label for="title"><b>Title</b></label>
                        <input type="text" placeholder="Enter Title" name="title" required>
                    
                        <label for="author"><b>Author</b></label>
                        <input type="author" placeholder="Enter Author" name="author" required>

                        <label for="ISBN"><b>ISBN</b></label>
                        <input type="ISBN" placeholder="Enter ISBN" name="ISBN" required>

                        <label for="location"><b>Location</b></label>
                        <input type="location" placeholder="Enter Location" name="location" required>

                        <label for="status"><b>Status</b></label>
                        <select type="status" name="status">
                            <option value="available" default>Available</option>
                            <option value="checked out" default>Checked Out</option>
                            <option value="lost">Lost</option>
                            <option value="replace">Replace</option>
                        </select>
                    
                        <button id="add-form-button" type="submit">Add Book</button>
                    </form>
                </div>
                <div hidden id="edit-form" class="staff-form">
                    <form name='edit-book-form' method='post' action="{{ url_for("editbook")}}">

                        <input type="book_id" name="book_id" hidden>

                        <label for="title"><b>Title</b></label>
                        <input type="text" placeholder="Enter Title" name="title" required>
                    
                        <label for="author"><b>Author</b></label>
                        <input type="author" placeholder="Enter Author" name="author" required>

                        <label for="ISBN"><b>ISBN</b></label>
                        <input type="ISBN" placeholder="Enter ISBN" name="ISBN" required>

                        <label for="location"><b>Location</b></label>
                        <input type="location" placeholder="Enter Location" name="location" required>

                        <label for="status"><b>Status</b></label>
                        <select type="status" name="status">
                            <option value="available" default>Available</option>
                            <option value="checked out" default>Checked Out</option>
                            <option value="lost">Lost</option>
                            <option value="replace">Replace</option>
                        </select>
                    
                        <button id="edit-form-button" type="submit">Edit Book</button>
                    </form>
                </div>
                {% endif %}
                
                {% for item in data %}
                <tr id="{{item['book_id']}}">
                    <td>{{item['book_id']}}</td>
                    <td>{{item['title']}}</td>
                    <td>{{item['author']}}</td>
                    <td>{{item['ISBN']}}</td>
                    <td>{{item['location']}}</td>
                    <td>{{item['status']}}</td>
                    <td>{{item['added']}}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <script src="{{ url_for('static', filename='scripts/tables.js') }}"></script>
</body>

</html>